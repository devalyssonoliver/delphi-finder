unit SearchMore;

interface

uses
  System.SysUtils, System.Classes,
  Vcl.Controls, Vcl.StdCtrls, Vcl.Buttons, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls,
  Data.DB, Vcl.Grids, Vcl.DBGrids;

type
  TBotaoPesquisa = class(TBitBtn)
  private
    FTituloTelaPesquisa: String;
    FLarguraTelaPesquisa: Integer;
    FAlturaTelaPesquisa: Integer;
    procedure ExibirTelaDePesquisa;
  protected
    procedure Click; override;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    property TituloTelaPesquisa: String read FTituloTelaPesquisa write FTituloTelaPesquisa;
    property LarguraTelaPesquisa: Integer read FLarguraTelaPesquisa write FLarguraTelaPesquisa;
    property AlturaTelaPesquisa: Integer read FAlturaTelaPesquisa write FAlturaTelaPesquisa;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('CursoComponenteDelphi', [TBotaoPesquisa]);
end;

{ TBotaoPesquisa }

constructor TBotaoPesquisa.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  Caption := '...';
  Width := 25;
  Height := 25;
  FLarguraTelaPesquisa := 640;
  FAlturaTelaPesquisa := 400;
end;

destructor TBotaoPesquisa.Destroy;
begin
  inherited Destroy;
end;

procedure TBotaoPesquisa.Click;
begin
  inherited Click;
  ExibirTelaDePesquisa;
end;

procedure TBotaoPesquisa.ExibirTelaDePesquisa;
var
  TelaPesquisa: TForm;
  PainelSuperior, PainelInferior: TPanel;
  GradeResultados: TDBGrid;
begin
  TelaPesquisa := TForm.Create(nil);
  try
    // Configuração da Tela de Pesquisa
    TelaPesquisa.BorderStyle := bsDialog;
    TelaPesquisa.Position := poScreenCenter;
    TelaPesquisa.Font.Name := 'Tahoma';
    TelaPesquisa.Font.Size := 8;
    TelaPesquisa.Caption := FTituloTelaPesquisa;
    TelaPesquisa.Height := FAlturaTelaPesquisa;
    TelaPesquisa.Width := FLarguraTelaPesquisa;

    // Configuração do Painel Superior
    PainelSuperior := TPanel.Create(TelaPesquisa);
    PainelSuperior.Parent := TelaPesquisa;
    PainelSuperior.Align := alTop;
    PainelSuperior.Height := 50;

    // Configuração do Painel Inferior
    PainelInferior := TPanel.Create(TelaPesquisa);
    PainelInferior.Parent := TelaPesquisa;
    PainelInferior.Align := alBottom;
    PainelInferior.Height := 50;

    // Configuração da Grade de Resultados
    GradeResultados := TDBGrid.Create(TelaPesquisa);
    GradeResultados.Parent := TelaPesquisa;
    GradeResultados.Align := alClient;
    GradeResultados.BorderStyle := bsNone;

    // Exibição da tela modal
    TelaPesquisa.ShowModal;
  finally
    TelaPesquisa.Release;
  end;
end;

end.

